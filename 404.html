<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Redirecting... | FormanPacific Service Claims</title>

  <!-- Security headers (CSP, etc.) are set in Cloudflare. No meta CSP here. -->

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;color:#333;padding:20px}
    .container{text-align:center;max-width:700px;padding:40px;background:#fff;border-radius:12px;box-shadow:0 4px 8px rgba(0,0,0,.1);width:100%}
    .logo{display:inline-flex;align-items:center;gap:15px;margin-bottom:20px}
    .logo-icon{width:60px;height:60px;background:linear-gradient(135deg,#1e3c72,#2a5298);border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:28px}
    .logo-text{font-size:2.2em;font-weight:700;color:#1e3c72}
    .brand-tagline{color:#666;font-size:1.1em;margin-bottom:30px}
    .spinner{width:60px;height:60px;border:4px solid #f5f5f5;border-top:4px solid #1e3c72;border-radius:50%;animation:spin 1s linear infinite;margin:20px auto}
    @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
    .message{font-size:1.2em;margin:20px 0;color:#333}
    .countdown{font-size:2em;font-weight:700;margin:20px 0;color:#1e3c72}
    .manual-link a,.cta-button{background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff;text-decoration:none;padding:15px 25px;border-radius:8px;font-size:1.2em;box-shadow:0 4px 6px rgba(0,0,0,.2);display:inline-block;transition:.3s;margin:0 7px}
    .manual-link a:hover,.cta-button:hover{transform:translateY(-2px);box-shadow:0 6px 12px rgba(0,0,0,.3)}
    .error-container{display:none}
    .error-container.show{display:block}
    .error-container h2{color:#333;margin-bottom:15px}
    .error-container p{color:#666;margin-bottom:20px}
    .suggestions{margin-top:30px;text-align:left;background:#f5f5f5;padding:20px;border-radius:12px}
    .suggestions h3{color:#333;margin-bottom:15px;text-align:center}
    .suggestions ul{list-style:none;padding:0;margin:0}
    .suggestions li{margin:10px 0;padding:15px;background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);transition:.3s}
    .suggestions li:hover{box-shadow:0 4px 8px rgba(0,0,0,.1);transform:translateY(-2px)}
    .suggestions a{color:#333;text-decoration:none;display:block}
    .suggestions a strong{color:#1e3c72;font-size:1.1em}
    .suggestions a small{color:#666;font-size:.9em}
    .trust-indicators{margin-top:30px;padding:20px;background:linear-gradient(135deg,#f0f8ff,#e6f3ff);border-radius:8px;border-left:4px solid #1e3c72}
    .trust-indicators .badges{display:flex;align-items:center;justify-content:center;gap:30px;flex-wrap:wrap}
    .trust-badge{text-align:center}
    .trust-badge .icon{font-size:1.5em;color:#1e3c72}
    .trust-badge small{color:#666;display:block;margin-top:5px}
    @media (max-width:768px){
      .container{padding:20px;margin:10px}
      .logo-text{font-size:1.8em}
      .manual-link a,.cta-button{padding:12px 20px;font-size:1.1em;margin:5px;display:block}
      .suggestions{padding:15px}
      .suggestions li{padding:12px}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">
      <div class="logo-icon">FP</div>
      <div class="logo-text">FormanPacific</div>
    </div>
    <div class="brand-tagline">Looking for the page you requested...</div>

    <div id="loadingContainer">
      <div class="spinner"></div>
      <div class="message">Checking our service directory</div>
      <div class="countdown" id="countdown" style="display:none;">3</div>

      <div class="trust-indicators">
        <div class="badges">
          <div class="trust-badge"><div class="icon">üîí</div><small>Secure Platform</small></div>
          <div class="trust-badge"><div class="icon">‚úÖ</div><small>ISO Certified</small></div>
          <div class="trust-badge"><div class="icon">‚ö°</div><small>24/7 Service</small></div>
        </div>
        <p style="text-align:center;margin-top:15px;color:#555;font-size:.9em;">
          <strong>Your data is protected.</strong> Connecting you to FormanPacific's secure service management platform.
        </p>
      </div>
    </div>

    <div id="errorContainer" class="error-container">
      <h2>Page Not Found</h2>
      <p>We couldn't find the page you're looking for, and no redirect was configured for this URL.</p>

      <div class="suggestions">
        <h3>üîß Quick Links to Popular Services:</h3>
        <ul id="suggestionsList"></ul>
      </div>

      <div class="manual-link">
        <a href="https://www.formanpacific.com" class="cta-button">üè† Go to Homepage</a>
        <a href="tel:048873337" class="cta-button">üìû Call 04 887 3337</a>
      </div>
    </div>
  </div>

  <script>
    // Redirect database - routes to either Microsoft Form or Admin portal
    const redirectDatabase = {
      // Contact and general inquiries -> Microsoft Form
      '/contact':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      '/contact-form':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      '/new-business':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      '/feedback':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      '/complaint':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      '/careers':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      
      // Emergency services -> Microsoft Form
      '/emergency':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      '/emergency-service':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      '/emergency-procedures':'https://www.formanpacific.com/admin',
      '/report-emergency':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      '/emergency-resources':'https://www.formanpacific.com/admin',
      
      // Claims -> Microsoft Form
      '/claim':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      '/insurance-claim':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      '/claim-status':'https://www.formanpacific.com/admin',
      '/track-response':'https://www.formanpacific.com/admin',
      
      // Supplier registration -> Microsoft Form
      '/supplier-registration':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      '/become-supplier':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      '/supplier-application':'https://forms.office.com/Pages/ResponsePage.aspx?id=vMb_Yc7Zi0WBINMhh8N3DSnleyJD3nBGm0qPafV8nlFUREpQSDdMOVE4NFhNOEpZSEpEUzFaUVZJTy4u',
      
      // All supplier portal functions -> Admin
      '/supplier':'https://www.formanpacific.com/admin',
      '/supplier-portal':'https://www.formanpacific.com/admin',
      '/supplier-payments':'https://www.formanpacific.com/admin',
      '/supplier-compliance':'https://www.formanpacific.com/admin',
      '/supplier-inquiry':'https://www.formanpacific.com/admin',
      '/supplier-activation':'https://www.formanpacific.com/admin',
      '/supplier-relations':'https://www.formanpacific.com/admin',
      '/supplier-support':'https://www.formanpacific.com/admin',
      '/supplier-terms':'https://www.formanpacific.com/admin',
      
      // Admin and dashboard -> Admin portal
      '/admin':'https://www.formanpacific.com/admin',
      '/admin/login':'https://www.formanpacific.com/admin',
      '/dashboard':'https://www.formanpacific.com/admin',
      '/portal':'https://www.formanpacific.com/admin',
      '/login':'https://www.formanpacific.com/admin',
      
      // Documentation and compliance -> Admin
      '/documentation':'https://www.formanpacific.com/admin',
      '/compliance':'https://www.formanpacific.com/admin',
      '/compliance-standards':'https://www.formanpacific.com/admin',
      '/compliance-docs':'https://www.formanpacific.com/admin',
      '/training':'https://www.formanpacific.com/admin',
      '/support':'https://www.formanpacific.com/admin',
      
      // News and updates -> Admin
      '/news':'https://www.formanpacific.com/admin',
      '/news/auckland-flooding-2023':'https://www.formanpacific.com/admin',
      '/news/cyclone-gabrielle-response':'https://www.formanpacific.com/admin',
      '/news/technology-upgrade-2024':'https://www.formanpacific.com/admin',
      '/news/supplier-network-expansion':'https://www.formanpacific.com/admin',
      '/news/compliance-certification-2024':'https://www.formanpacific.com/admin',
      '/news/emergency-response-excellence':'https://www.formanpacific.com/admin',
      
      // Services pages -> Admin
      '/services':'https://www.formanpacific.com/admin',
      '/insurance-partners':'https://www.formanpacific.com/admin',
      '/corporate-services':'https://www.formanpacific.com/admin',
      '/escalation':'https://www.formanpacific.com/admin',
      
      // Legal pages - these stay public but redirect to actual pages if they exist
      '/privacy':'https://www.formanpacific.com/privacy',
      '/terms':'https://www.formanpacific.com/terms',
      
      // About pages -> Admin
      '/about':'https://www.formanpacific.com/admin',
      '/about-us':'https://www.formanpacific.com/admin',
      '/our-story':'https://www.formanpacific.com/admin',
      '/our-team':'https://www.formanpacific.com/admin',
      '/our-values':'https://www.formanpacific.com/admin',
      
      // Case studies -> Admin
      '/case-studies':'https://www.formanpacific.com/admin',
      '/success-stories':'https://www.formanpacific.com/admin',
      
      // Resources -> Admin
      '/resources':'https://www.formanpacific.com/admin',
      '/blog':'https://www.formanpacific.com/admin',
      '/insights':'https://www.formanpacific.com/admin',
      
      // Partner pages -> Admin
      '/partners':'https://www.formanpacific.com/admin',
      '/brokers':'https://www.formanpacific.com/admin',
      
      // Other common paths -> Admin
      '/api':'https://www.formanpacific.com/admin',
      '/reports':'https://www.formanpacific.com/admin',
      '/analytics':'https://www.formanpacific.com/admin',
      '/settings':'https://www.formanpacific.com/admin',
      '/profile':'https://www.formanpacific.com/admin',
      '/account':'https://www.formanpacific.com/admin',
      
      // Downloads -> Admin
      '/downloads':'https://www.formanpacific.com/admin',
      '/documents':'https://www.formanpacific.com/admin',
      '/forms':'https://www.formanpacific.com/admin',
      '/templates':'https://www.formanpacific.com/admin'
    };

    function handleRedirect(){
      // normalize path (strip trailing slash except root) and do case-insensitive lookup
      const raw = window.location.pathname;
      const path = raw.replace(/\/+$/,'') || '/';
      const lower = path.toLowerCase();

      // build lowercase lookup map once
      const dbLower = handleRedirect._dbLower || (handleRedirect._dbLower =
        Object.fromEntries(Object.entries(redirectDatabase).map(([k,v]) => [k.toLowerCase(), v]))
      );

      const url = dbLower[lower];
      if (url) {
        performRedirect(url, path);
      } else {
        showErrorPage(path);
      }
    }

    function performRedirect(url, originalPath){
      if (['/new-business','/claim','/emergency'].includes(originalPath.toLowerCase())){
        fireConversionEvent(originalPath.toLowerCase().slice(1));
      }

      const info = getServiceInfo(url, originalPath);
      document.querySelector('.message').innerHTML =
        `<strong style="color:#1e3c72;">‚úÖ ${info.title}</strong><br>${info.description}`;
      document.querySelector('.brand-tagline').textContent =
        'Securely connecting you to FormanPacific services...';
      document.getElementById('countdown').style.display = 'none';

      setTimeout(() => { window.location.href = url; }, 1500);
    }

    function fireConversionEvent(name){ console.log('Event fired:', name); }

    function getServiceInfo(url, path){
      const p = path.toLowerCase();
      
      // Forms redirects
      if (p === '/new-business') return {title:'New Business Registration', description:'Taking you to our secure new business application form.'};
      if (p === '/contact' || p === '/contact-form') return {title:'General Inquiry Form', description:'Connecting you to our secure contact form.'};
      if (p === '/supplier-registration') return {title:'Supplier Registration', description:'Join 500+ verified service providers across New Zealand.'};
      if (p === '/emergency' || p === '/emergency-service') return {title:'Emergency Service Request', description:'Connecting you to our 24/7 emergency dispatch system.'};
      if (p === '/claim' || p === '/insurance-claim') return {title:'Insurance Claim Processing', description:'Fast-track your insurance claim with our streamlined process.'};
      if (p === '/report-emergency') return {title:'Report Emergency', description:'Immediate emergency incident reporting system.'};
      if (p === '/feedback') return {title:'Feedback Form', description:'Share your experience with FormanPacific services.'};
      if (p === '/complaint') return {title:'Complaint Form', description:'Submit a formal complaint for investigation.'};
      if (p === '/careers') return {title:'Career Opportunities', description:'Explore career opportunities at FormanPacific.'};
      
      // Admin portal redirects
      if (url.includes('formanpacific.com/admin')) {
        if (p.includes('supplier')) return {title:'Supplier Portal Access', description:'Redirecting to secure supplier management portal.'};
        if (p.includes('news')) return {title:'News & Updates', description:'Access latest FormanPacific news and updates.'};
        if (p.includes('compliance')) return {title:'Compliance Center', description:'Access compliance documentation and standards.'};
        if (p.includes('admin') || p.includes('dashboard')) return {title:'Administrator Access', description:'Redirecting to the secure admin portal.'};
        if (p.includes('training')) return {title:'Training Resources', description:'Access training for suppliers and partners.'};
        if (p.includes('about')) return {title:'About FormanPacific', description:'Learn more about our company and services.'};
        return {title:'Secure Portal Access', description:'Redirecting to FormanPacific secure portal.'};
      }
      
      // Legal pages
      if (p === '/privacy') return {title:'Privacy Policy', description:'Accessing FormanPacific privacy policy.'};
      if (p === '/terms') return {title:'Terms of Service', description:'Accessing FormanPacific terms of service.'};
      
      // Microsoft Forms default
      if (url.includes('forms.office.com') || url.includes('forms.microsoft')) 
        return {title:'Secure Form Access', description:'Protected Microsoft Forms platform for submission.'};
      
      return {title:'Connecting You Securely', description:'Taking you to the requested FormanPacific service.'};
    }

    function showErrorPage(path){
      document.getElementById('loadingContainer').style.display = 'none';
      document.getElementById('errorContainer').classList.add('show');

      const suggestions = [
        { url:'https://www.formanpacific.com/', title:'üè† Homepage', desc:'Main FormanPacific website' },
        { url:'tel:048873337', title:'üìû Call 04 887 3337', desc:'Speak directly with our team' },
        { url:'/new-business', title:'üöÄ New Business', desc:'Start your partnership with FormanPacific' },
        { url:'/supplier-registration', title:'ü§ù Become a Supplier', desc:'Join our verified supplier network' },
        { url:'/emergency', title:'üö® Emergency Service', desc:'24/7 emergency dispatch available' },
        { url:'/contact-form', title:'üìù Contact Us', desc:'General inquiries and support' }
      ];

      document.getElementById('suggestionsList').innerHTML =
        suggestions.map(s => `<li><a href="${s.url}"><strong>${s.title}</strong><br><small>${s.desc}</small></a></li>`).join('');
    }

    document.addEventListener('DOMContentLoaded', handleRedirect);
  </script>
</body>
</html>
